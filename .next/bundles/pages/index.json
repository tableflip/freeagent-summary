{"component":"module.exports =\nwebpackJsonp([3],{\n\n/***/ 108:\n/***/ (function(module, exports, __webpack_require__) {\n\n(function (global, factory) {\n\t true ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.accounting = global.accounting || {})));\n}(this, function (exports) { 'use strict';\n\n\tfunction __commonjs(fn, module) { return module = { exports: {} }, fn(module, module.exports), module.exports; }\n\n\t/**\n\t * The library's settings configuration object.\n\t *\n\t * Contains default parameters for currency and number formatting\n\t */\n\tvar settings = {\n\t  symbol: '$', // default currency symbol is '$'\n\t  format: '%s%v', // controls output: %s = symbol, %v = value (can be object, see docs)\n\t  decimal: '.', // decimal point separator\n\t  thousand: ',', // thousands separator\n\t  precision: 2, // decimal places\n\t  grouping: 3, // digit grouping (not implemented yet)\n\t  stripZeros: false, // strip insignificant zeros from decimal part\n\t  fallback: 0 // value returned on unformat() failure\n\t};\n\n\t/**\n\t * Takes a string/array of strings, removes all formatting/cruft and returns the raw float value\n\t * Alias: `accounting.parse(string)`\n\t *\n\t * Decimal must be included in the regular expression to match floats (defaults to\n\t * accounting.settings.decimal), so if the number uses a non-standard decimal\n\t * separator, provide it as the second argument.\n\t *\n\t * Also matches bracketed negatives (eg. '$ (1.99)' => -1.99)\n\t *\n\t * Doesn't throw any errors (`NaN`s become 0) but this may change in future\n\t *\n\t * ```js\n\t *  accounting.unformat(\"Â£ 12,345,678.90 GBP\"); // 12345678.9\n\t * ```\n\t *\n\t * @method unformat\n\t * @for accounting\n\t * @param {String|Array<String>} value The string or array of strings containing the number/s to parse.\n\t * @param {Number}               decimal Number of decimal digits of the resultant number\n\t * @return {Float} The parsed number\n\t */\n\tfunction unformat(value) {\n\t  var decimal = arguments.length <= 1 || arguments[1] === undefined ? settings.decimal : arguments[1];\n\t  var fallback = arguments.length <= 2 || arguments[2] === undefined ? settings.fallback : arguments[2];\n\n\t  // Recursively unformat arrays:\n\t  if (Array.isArray(value)) {\n\t    return value.map(function (val) {\n\t      return unformat(val, decimal, fallback);\n\t    });\n\t  }\n\n\t  // Return the value as-is if it's already a number:\n\t  if (typeof value === 'number') return value;\n\n\t  // Build regex to strip out everything except digits, decimal point and minus sign:\n\t  var regex = new RegExp('[^0-9-(-)-' + decimal + ']', ['g']);\n\t  var unformattedValueString = ('' + value).replace(regex, '') // strip out any cruft\n\t  .replace(decimal, '.') // make sure decimal point is standard\n\t  .replace(/\\(([-]*\\d*[^)]?\\d+)\\)/g, '-$1') // replace bracketed values with negatives\n\t  .replace(/\\((.*)\\)/, ''); // remove any brackets that do not have numeric value\n\n\t  /**\n\t   * Handling -ve number and bracket, eg.\n\t   * (-100) = 100, -(100) = 100, --100 = 100\n\t   */\n\t  var negative = (unformattedValueString.match(/-/g) || 2).length % 2,\n\t      absUnformatted = parseFloat(unformattedValueString.replace(/-/g, '')),\n\t      unformatted = absUnformatted * (negative ? -1 : 1);\n\n\t  // This will fail silently which may cause trouble, let's wait and see:\n\t  return !isNaN(unformatted) ? unformatted : fallback;\n\t}\n\n\t/**\n\t * Check and normalise the value of precision (must be positive integer)\n\t */\n\tfunction _checkPrecision(val, base) {\n\t  val = Math.round(Math.abs(val));\n\t  return isNaN(val) ? base : val;\n\t}\n\n\t/**\n\t * Implementation of toFixed() that treats floats more like decimals\n\t *\n\t * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\n\t * problems for accounting- and finance-related software.\n\t *\n\t * ```js\n\t *  (0.615).toFixed(2);           // \"0.61\" (native toFixed has rounding issues)\n\t *  accounting.toFixed(0.615, 2); // \"0.62\"\n\t * ```\n\t *\n\t * @method toFixed\n\t * @for accounting\n\t * @param {Float}   value         The float to be treated as a decimal number.\n\t * @param {Number} [precision=2] The number of decimal digits to keep.\n\t * @return {String} The given number transformed into a string with the given precission\n\t */\n\tfunction toFixed(value, precision) {\n\t  precision = _checkPrecision(precision, settings.precision);\n\t  var power = Math.pow(10, precision);\n\n\t  // Multiply up by precision, round accurately, then divide and use native toFixed():\n\t  return (Math.round((value + 1e-8) * power) / power).toFixed(precision);\n\t}\n\n\tvar index = __commonjs(function (module) {\n\t/* eslint-disable no-unused-vars */\n\t'use strict';\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\n\t\treturn Object(val);\n\t}\n\n\tmodule.exports = Object.assign || function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Object.getOwnPropertySymbols) {\n\t\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn to;\n\t};\n\t});\n\n\tvar objectAssign = (index && typeof index === 'object' && 'default' in index ? index['default'] : index);\n\n\tfunction _stripInsignificantZeros(str, decimal) {\n\t  var parts = str.split(decimal);\n\t  var integerPart = parts[0];\n\t  var decimalPart = parts[1].replace(/0+$/, '');\n\n\t  if (decimalPart.length > 0) {\n\t    return integerPart + decimal + decimalPart;\n\t  }\n\n\t  return integerPart;\n\t}\n\n\t/**\n\t * Format a number, with comma-separated thousands and custom precision/decimal places\n\t * Alias: `accounting.format()`\n\t *\n\t * Localise by overriding the precision and thousand / decimal separators\n\t *\n\t * ```js\n\t * accounting.formatNumber(5318008);              // 5,318,008\n\t * accounting.formatNumber(9876543.21, { precision: 3, thousand: \" \" }); // 9 876 543.210\n\t * ```\n\t *\n\t * @method formatNumber\n\t * @for accounting\n\t * @param {Number}        number The number to be formatted.\n\t * @param {Object}        [opts={}] Object containing all the options of the method.\n\t * @return {String} The given number properly formatted.\n\t  */\n\tfunction formatNumber(number) {\n\t  var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\t  // Resursively format arrays:\n\t  if (Array.isArray(number)) {\n\t    return number.map(function (val) {\n\t      return formatNumber(val, opts);\n\t    });\n\t  }\n\n\t  // Build options object from second param (if object) or all params, extending defaults:\n\t  opts = objectAssign({}, settings, opts);\n\n\t  // Do some calc:\n\t  var negative = number < 0 ? '-' : '';\n\t  var base = parseInt(toFixed(Math.abs(number), opts.precision), 10) + '';\n\t  var mod = base.length > 3 ? base.length % 3 : 0;\n\n\t  // Format the number:\n\t  var formatted = negative + (mod ? base.substr(0, mod) + opts.thousand : '') + base.substr(mod).replace(/(\\d{3})(?=\\d)/g, '$1' + opts.thousand) + (opts.precision > 0 ? opts.decimal + toFixed(Math.abs(number), opts.precision).split('.')[1] : '');\n\n\t  return opts.stripZeros ? _stripInsignificantZeros(formatted, opts.decimal) : formatted;\n\t}\n\n\tvar index$1 = __commonjs(function (module) {\n\t'use strict';\n\n\tvar strValue = String.prototype.valueOf;\n\tvar tryStringObject = function tryStringObject(value) {\n\t\ttry {\n\t\t\tstrValue.call(value);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tvar toStr = Object.prototype.toString;\n\tvar strClass = '[object String]';\n\tvar hasToStringTag = typeof Symbol === 'function' && typeof Symbol.toStringTag === 'symbol';\n\n\tmodule.exports = function isString(value) {\n\t\tif (typeof value === 'string') { return true; }\n\t\tif (typeof value !== 'object') { return false; }\n\t\treturn hasToStringTag ? tryStringObject(value) : toStr.call(value) === strClass;\n\t};\n\t});\n\n\tvar isString = (index$1 && typeof index$1 === 'object' && 'default' in index$1 ? index$1['default'] : index$1);\n\n\t/**\n\t * Parses a format string or object and returns format obj for use in rendering\n\t *\n\t * `format` is either a string with the default (positive) format, or object\n\t * containing `pos` (required), `neg` and `zero` values\n\t *\n\t * Either string or format.pos must contain \"%v\" (value) to be valid\n\t *\n\t * @method _checkCurrencyFormat\n\t * @for accounting\n\t * @param {String}        [format=\"%s%v\"] String with the format to apply, where %s is the currency symbol and %v is the value.\n\t * @return {Object} object represnting format (with pos, neg and zero attributes)\n\t */\n\tfunction _checkCurrencyFormat(format) {\n\t  // Format should be a string, in which case `value` ('%v') must be present:\n\t  if (isString(format) && format.match('%v')) {\n\t    // Create and return positive, negative and zero formats:\n\t    return {\n\t      pos: format,\n\t      neg: format.replace('-', '').replace('%v', '-%v'),\n\t      zero: format\n\t    };\n\t  }\n\n\t  // Otherwise, assume format was fine:\n\t  return format;\n\t}\n\n\t/**\n\t * Format a number into currency\n\t *\n\t * Usage: accounting.formatMoney(number, symbol, precision, thousandsSep, decimalSep, format)\n\t * defaults: (0, '$', 2, ',', '.', '%s%v')\n\t *\n\t * Localise by overriding the symbol, precision, thousand / decimal separators and format\n\t *\n\t * ```js\n\t * // Default usage:\n\t * accounting.formatMoney(12345678); // $12,345,678.00\n\t *\n\t * // European formatting (custom symbol and separators), can also use options object as second parameter:\n\t * accounting.formatMoney(4999.99, { symbol: \"â¬\", precision: 2, thousand: \".\", decimal: \",\" }); // â¬4.999,99\n\t *\n\t * // Negative values can be formatted nicely:\n\t * accounting.formatMoney(-500000, { symbol: \"Â£ \", precision: 0 }); // Â£ -500,000\n\t *\n\t * // Simple `format` string allows control of symbol position (%v = value, %s = symbol):\n\t * accounting.formatMoney(5318008, { symbol: \"GBP\",  format: \"%v %s\" }); // 5,318,008.00 GBP\n\t * ```\n\t *\n\t * @method formatMoney\n\t * @for accounting\n\t * @param {Number}        number Number to be formatted.\n\t * @param {Object}        [opts={}] Object containing all the options of the method.\n\t * @return {String} The given number properly formatted as money.\n\t */\n\tfunction formatMoney(number) {\n\t  var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\t  // Resursively format arrays:\n\t  if (Array.isArray(number)) {\n\t    return number.map(function (val) {\n\t      return formatMoney(val, opts);\n\t    });\n\t  }\n\n\t  // Build options object from second param (if object) or all params, extending defaults:\n\t  opts = objectAssign({}, settings, opts);\n\n\t  // Check format (returns object with pos, neg and zero):\n\t  var formats = _checkCurrencyFormat(opts.format);\n\n\t  // Choose which format to use for this value:\n\t  var useFormat = undefined;\n\n\t  if (number > 0) {\n\t    useFormat = formats.pos;\n\t  } else if (number < 0) {\n\t    useFormat = formats.neg;\n\t  } else {\n\t    useFormat = formats.zero;\n\t  }\n\n\t  // Return with currency symbol added:\n\t  return useFormat.replace('%s', opts.symbol).replace('%v', formatNumber(Math.abs(number), opts));\n\t}\n\n\t/**\n\t * Format a list of numbers into an accounting column, padding with whitespace\n\t * to line up currency symbols, thousand separators and decimals places\n\t *\n\t * List should be an array of numbers\n\t *\n\t * Returns array of accouting-formatted number strings of same length\n\t *\n\t * NB: `white-space:pre` CSS rule is required on the list container to prevent\n\t * browsers from collapsing the whitespace in the output strings.\n\t *\n\t * ```js\n\t * accounting.formatColumn([123.5, 3456.49, 777888.99, 12345678, -5432], { symbol: \"$ \" });\n\t * ```\n\t *\n\t * @method formatColumn\n\t * @for accounting\n\t * @param {Array<Number>} list An array of numbers to format\n\t * @param {Object}        [opts={}] Object containing all the options of the method.\n\t * @param {Object|String} [symbol=\"$\"] String with the currency symbol. For conveniency if can be an object containing all the options of the method.\n\t * @param {Integer}       [precision=2] Number of decimal digits\n\t * @param {String}        [thousand=','] String with the thousands separator.\n\t * @param {String}        [decimal=\".\"] String with the decimal separator.\n\t * @param {String}        [format=\"%s%v\"] String with the format to apply, where %s is the currency symbol and %v is the value.\n\t * @return {Array<String>} array of accouting-formatted number strings of same length\n\t */\n\tfunction formatColumn(list) {\n\t  var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\t  if (!list) return [];\n\n\t  // Build options object from second param (if object) or all params, extending defaults:\n\t  opts = objectAssign({}, settings, opts);\n\n\t  // Check format (returns object with pos, neg and zero), only need pos for now:\n\t  var formats = _checkCurrencyFormat(opts.format);\n\n\t  // Whether to pad at start of string or after currency symbol:\n\t  var padAfterSymbol = formats.pos.indexOf('%s') < formats.pos.indexOf('%v');\n\n\t  // Store value for the length of the longest string in the column:\n\t  var maxLength = 0;\n\n\t  // Format the list according to options, store the length of the longest string:\n\t  var formatted = list.map(function (val) {\n\t    if (Array.isArray(val)) {\n\t      // Recursively format columns if list is a multi-dimensional array:\n\t      return formatColumn(val, opts);\n\t    }\n\t    // Clean up the value\n\t    val = unformat(val, opts.decimal);\n\n\t    // Choose which format to use for this value (pos, neg or zero):\n\t    var useFormat = undefined;\n\n\t    if (val > 0) {\n\t      useFormat = formats.pos;\n\t    } else if (val < 0) {\n\t      useFormat = formats.neg;\n\t    } else {\n\t      useFormat = formats.zero;\n\t    }\n\n\t    // Format this value, push into formatted list and save the length:\n\t    var fVal = useFormat.replace('%s', opts.symbol).replace('%v', formatNumber(Math.abs(val), opts));\n\n\t    if (fVal.length > maxLength) {\n\t      maxLength = fVal.length;\n\t    }\n\n\t    return fVal;\n\t  });\n\n\t  // Pad each number in the list and send back the column of numbers:\n\t  return formatted.map(function (val) {\n\t    // Only if this is a string (not a nested array, which would have already been padded):\n\t    if (isString(val) && val.length < maxLength) {\n\t      // Depending on symbol position, pad after symbol or at index 0:\n\t      return padAfterSymbol ? val.replace(opts.symbol, opts.symbol + new Array(maxLength - val.length + 1).join(' ')) : new Array(maxLength - val.length + 1).join(' ') + val;\n\t    }\n\t    return val;\n\t  });\n\t}\n\n\texports.settings = settings;\n\texports.unformat = unformat;\n\texports.toFixed = toFixed;\n\texports.formatMoney = formatMoney;\n\texports.formatNumber = formatNumber;\n\texports.formatColumn = formatColumn;\n\texports.format = formatMoney;\n\texports.parse = unformat;\n\n}));\n//# sourceMappingURL=accounting.umd.js.map\n\n/***/ }),\n\n/***/ 382:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process, __resourceQuery) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(31);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(28);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(29);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(37);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(36);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _url = __webpack_require__(35);\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _head = __webpack_require__(203);\n\nvar _head2 = _interopRequireDefault(_head);\n\nvar _dashboard = __webpack_require__(817);\n\nvar _dashboard2 = _interopRequireDefault(_dashboard);\n\nvar _config = __webpack_require__(350);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _freeagent = __webpack_require__(150);\n\nvar _freeagent2 = _interopRequireDefault(_freeagent);\n\nvar _stateUtils = __webpack_require__(351);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/pages/index.js?entry';\n\n\nvar Home = function (_Component) {\n  (0, _inherits3.default)(Home, _Component);\n\n  function Home() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    (0, _classCallCheck3.default)(this, Home);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = Home.__proto__ || (0, _getPrototypeOf2.default)(Home)).call.apply(_ref, [this].concat(args))), _this), _this.state = { freeagent: null }, _this.connectToFreeagent = function (evt) {\n      evt.preventDefault();\n      var _window$location = window.location,\n          protocol = _window$location.protocol,\n          host = _window$location.host;\n\n      var redirectUri = protocol + '//' + host + '/oauth';\n      var oauthUrl = _url2.default.format({\n        protocol: 'https:',\n        host: 'api.freeagent.com',\n        pathname: '/v2/approve_app',\n        query: {\n          redirect_uri: redirectUri,\n          response_type: 'code',\n          client_id: _config2.default.clientId,\n          state: window.oauthState\n        }\n      });\n      window.location = oauthUrl;\n    }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n  }\n\n  (0, _createClass3.default)(Home, [{\n    key: 'getChildContext',\n    value: function getChildContext() {\n      return { freeagent: this.state.freeagent };\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.setState({ freeagent: (0, _freeagent2.default)() });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var state = this.props.state;\n      var freeagent = this.state.freeagent;\n\n      return _react2.default.createElement('div', {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        }\n      }, state ? _react2.default.createElement(_head2.default, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        }\n      }, _react2.default.createElement('script', { dangerouslySetInnerHTML: { __html: 'window.oauthState=\\'' + state + '\\'' }, __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        }\n      })) : null, freeagent ? _react2.default.createElement(_dashboard2.default, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        }\n      }) : _react2.default.createElement('a', { href: '#', onClick: this.connectToFreeagent, __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        }\n      }, 'Connect to Freeagent'));\n    }\n  }], [{\n    key: 'getInitialProps',\n    value: function getInitialProps() {\n      return (0, _stateUtils.makeState)();\n    }\n  }]);\n\n  return Home;\n}(_react.Component);\n\nHome.childContextTypes = {\n  freeagent: _react2.default.PropTypes.object\n};\n\nexports.default = Home;\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/pages/index.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/pages/index.js\"); } } })();\n    (function (Component, route) {\n      if (false) return\n      if (false) return\n\n      var qs = __webpack_require__(41)\n      var params = qs.parse(__resourceQuery.slice(1))\n      if (params.entry == null) return\n\n      module.hot.accept()\n      Component.__route = route\n\n      if (module.hot.status() === 'idle') return\n\n      var components = next.router.components\n      for (var r in components) {\n        if (!components.hasOwnProperty(r)) continue\n\n        if (components[r].Component.__route === route) {\n          next.router.update(r, Component)\n        }\n      }\n    })(module.exports.default || module.exports, \"/\")\n  \n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0), \"?entry\"))\n\n/***/ }),\n\n/***/ 815:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var _ref$accounts = _ref.accounts,\n      accounts = _ref$accounts === undefined ? [] : _ref$accounts;\n\n  return _react2.default.createElement('div', { className: 'ma4', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6\n    }\n  }, _react2.default.createElement('h3', { className: 'f5 ttu fw6', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7\n    }\n  }, 'Balances'), _react2.default.createElement('table', { className: 'collapse', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    }\n  }, _react2.default.createElement('tbody', {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    }\n  }, accounts.map(renderAccount))));\n};\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _accountingJs = __webpack_require__(108);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/components/accounts.js';\n\n\nfunction renderAccount(_ref2) {\n  var bank_name = _ref2.bank_name,\n      name = _ref2.name,\n      current_balance = _ref2.current_balance;\n\n  return _react2.default.createElement('tr', { className: 'fw2', key: name, __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    }\n  }, _react2.default.createElement('td', { className: 'pv2 pr3', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    }\n  }, name), _react2.default.createElement('td', { className: 'pv2 ph3 i', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    }\n  }, bank_name), _react2.default.createElement('td', { className: 'pv2 pl3 tr fw6 f3', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    }\n  }, (0, _accountingJs.formatMoney)(parseFloat(current_balance), { symbol: 'Â£', precision: 2 })));\n}\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/components/accounts.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/components/accounts.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 816:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var _ref$company = _ref.company,\n      company = _ref$company === undefined ? {} : _ref$company;\n  var name = company.name,\n      town = company.town,\n      country = company.country;\n\n  return _react2.default.createElement('header', { className: 'tc pv4 pv5-ns', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6\n    }\n  }, _react2.default.createElement('img', { src: 'https://tableflip.io/img/tableflip.min.svg', className: 'br3 h3 w3', alt: 'avatar', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 7\n    }\n  }), _react2.default.createElement('h1', { className: 'f5 f4-ns fw6', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    }\n  }, name), _react2.default.createElement('h2', { className: 'f6 fw2 ttu tracked', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    }\n  }, town, ', ', country));\n};\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/components/company.js';\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/components/company.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/components/company.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _freeagent = __webpack_require__(150);\n\nvar _company = __webpack_require__(816);\n\nvar _company2 = _interopRequireDefault(_company);\n\nvar _accounts = __webpack_require__(815);\n\nvar _accounts2 = _interopRequireDefault(_accounts);\n\nvar _invoices = __webpack_require__(819);\n\nvar _invoices2 = _interopRequireDefault(_invoices);\n\nvar _incomeTrend = __webpack_require__(818);\n\nvar _incomeTrend2 = _interopRequireDefault(_incomeTrend);\n\nvar _outflows = __webpack_require__(820);\n\nvar _outflows2 = _interopRequireDefault(_outflows);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/components/dashboard.js';\n\n\nvar Dashboard = function Dashboard(_ref) {\n  var company = _ref.company,\n      bankAccounts = _ref.bankAccounts,\n      overdueInvoices = _ref.overdueInvoices,\n      income = _ref.income,\n      expenses = _ref.expenses,\n      categories = _ref.categories;\n\n  return _react2.default.createElement('div', { className: 'flex flex-column mw9 center', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    }\n  }, company ? _react2.default.createElement(_company2.default, { company: company.company, __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    }\n  }) : null, _react2.default.createElement('div', { className: 'flex flex-row flex-wrap justify-around', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    }\n  }, bankAccounts ? _react2.default.createElement(_accounts2.default, { accounts: bankAccounts.bank_accounts, __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    }\n  }) : null, overdueInvoices ? _react2.default.createElement(_invoices2.default, { invoices: overdueInvoices.invoices, __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    }\n  }) : null, income ? _react2.default.createElement(_incomeTrend2.default, { invoices: income.invoices, __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    }\n  }) : null, bankAccounts && categories ? _react2.default.createElement(_outflows2.default, { accounts: bankAccounts.bank_accounts, categories: categories, __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    }\n  }) : null));\n};\n\nexports.default = (0, _freeagent.connectComponent)(function () {\n  return [{ key: 'company', endpoint: 'company' }, { key: 'bankAccounts', endpoint: 'bank_accounts' }, { key: 'overdueInvoices', endpoint: 'invoices?view=open_or_overdue', paging: true }, { key: 'income', endpoint: 'invoices?view=last_6_months', paging: true }, { key: 'categories', endpoint: 'categories' }];\n})(Dashboard);\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/components/dashboard.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/components/dashboard.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 818:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var _ref$invoices = _ref.invoices,\n      invoices = _ref$invoices === undefined ? [] : _ref$invoices;\n\n  var trends = calculateTrends(invoices);\n\n  return _react2.default.createElement('div', { className: 'ma4', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    }\n  }, _react2.default.createElement('h3', { className: 'f5 ttu fw6', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    }\n  }, 'Income Trend'), _react2.default.createElement('div', { className: 'cf nowrap', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    }\n  }, trends.map(function (_ref2) {\n    var monthsAgo = _ref2.monthsAgo,\n        rate = _ref2.rate;\n\n    return _react2.default.createElement('dl', { key: monthsAgo, className: 'fl fn-l w-50 dib-l w-auto-l lh-title mr5-l', __source: {\n        fileName: _jsxFileName,\n        lineNumber: 13\n      }\n    }, _react2.default.createElement('dd', { className: 'f6 fw4 ml0', __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14\n      }\n    }, 'Last ', monthsAgo, ' months'), _react2.default.createElement('dd', { className: 'f3 fw6 ml0', __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15\n      }\n    }, (0, _accountingJs.formatMoney)(rate, { symbol: 'Â£', precision: 2 })));\n  })));\n};\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _accountingJs = __webpack_require__(108);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/components/income-trend.js';\n\n\nvar oneMonth = 1000 * 60 * 60 * 24 * 30;\n\nfunction calculateTrends(invoices) {\n  return [1, 2, 3, 6].map(function (monthsAgo) {\n    var timeAgo = oneMonth * monthsAgo;\n    var minTime = Date.now() - timeAgo;\n\n    return {\n      monthsAgo: monthsAgo,\n      rate: invoices.reduce(function (total, _ref3) {\n        var dated_on = _ref3.dated_on,\n            net_value = _ref3.net_value;\n\n        var datedOn = new Date(dated_on).getTime();\n        if (datedOn > minTime) total += parseFloat(net_value);\n        return total;\n      }, 0) * 365 / (30 * monthsAgo)\n    };\n  });\n}\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/components/income-trend.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/components/income-trend.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 819:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (_ref) {\n  var _ref$invoices = _ref.invoices,\n      invoices = _ref$invoices === undefined ? [] : _ref$invoices;\n\n  var _summariseInvoices = summariseInvoices(invoices),\n      due = _summariseInvoices.due,\n      overdue = _summariseInvoices.overdue,\n      d90 = _summariseInvoices.d90;\n\n  return _react2.default.createElement('div', { className: 'ma4', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    }\n  }, _react2.default.createElement('h3', { className: 'f5 ttu fw6', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    }\n  }, 'Invoices'), _react2.default.createElement('div', { className: 'cf nowrap', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    }\n  }, _react2.default.createElement('dl', { className: 'fl fn-l w-50 dib-l w-auto-l lh-title mr5-l', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    }\n  }, _react2.default.createElement('dd', { className: 'f6 fw4 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    }\n  }, 'Due'), _react2.default.createElement('dd', { className: 'f3 fw6 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    }\n  }, (0, _accountingJs.formatMoney)(due, moneyFormat))), _react2.default.createElement('dl', { className: 'fl fn-l w-50 dib-l w-auto-l lh-title mr5-l', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    }\n  }, _react2.default.createElement('dd', { className: 'f6 fw4 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    }\n  }, 'of which Overdue'), _react2.default.createElement('dd', { className: 'f3 fw6 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    }\n  }, (0, _accountingJs.formatMoney)(overdue, moneyFormat))), _react2.default.createElement('dl', { className: 'fl fn-l w-50 dib-l w-auto-l lh-title mr5-l', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    }\n  }, _react2.default.createElement('dd', { className: 'f6 fw4 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    }\n  }, 'of which > 90d'), _react2.default.createElement('dd', { className: 'f3 fw6 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    }\n  }, (0, _accountingJs.formatMoney)(d90, moneyFormat)))));\n};\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _accountingJs = __webpack_require__(108);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/components/invoices.js';\n\n\nvar moneyFormat = { symbol: 'Â£', precision: 2 };\n\nvar d90Ago = 1000 * 60 * 60 * 24 * 90;\n\nfunction summariseInvoices(invoices) {\n  var d90CutOff = Date.now() - d90Ago;\n\n  return invoices.reduce(function (summary, _ref2) {\n    var due_value = _ref2.due_value,\n        due_on = _ref2.due_on,\n        status = _ref2.status;\n\n    var dueValue = parseFloat(due_value);\n    var dueOn = new Date(due_on).getTime();\n\n    summary.due += dueValue;\n    if (status === 'Overdue') summary.overdue += dueValue;\n    if (dueOn < d90CutOff) summary.d90 += dueValue;\n\n    return summary;\n  }, { due: 0, overdue: 0, d90: 0 });\n}\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/components/invoices.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/components/invoices.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 820:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _keys = __webpack_require__(113);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _extends2 = __webpack_require__(82);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _react = __webpack_require__(9);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _freeagent = __webpack_require__(150);\n\nvar _accountingJs = __webpack_require__(108);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _jsxFileName = '/home/richard/Node/freeagent-summary/components/outflows.js';\n\n\nvar moneyFormat = { symbol: 'Â£', precision: 2 };\nvar filters = [/HMRC VAT/];\n\nfunction Outflows(data) {\n  var pseudoArray = (0, _extends3.default)({}, data, { length: data.accounts.length });\n  var _categories = data.categories;\n  var categories = (0, _keys2.default)(_categories).reduce(function (categories, section) {\n    return categories.concat(_categories[section]);\n  }, []);\n  var transactions = Array.prototype.reduce.call(pseudoArray, function (allTrans, account) {\n    return allTrans.concat(account.bank_transactions);\n  }, []);\n  if (!transactions.length) return null;\n  var annualised = annualiseOutflows(transactions, categories);\n  return _react2.default.createElement('div', { className: 'ma4', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    }\n  }, _react2.default.createElement('h3', { className: 'f5 ttu fw6', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19\n    }\n  }, 'Outflows'), _react2.default.createElement('div', { className: 'cf nowrap', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    }\n  }, _react2.default.createElement('dl', { className: 'fl fn-l w-50 dib-l w-auto-l lh-title mr5-l', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    }\n  }, _react2.default.createElement('dd', { className: 'f6 fw4 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    }\n  }, 'Annualised'), _react2.default.createElement('dd', { className: 'f3 fw6 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    }\n  }, (0, _accountingJs.formatMoney)(annualised, moneyFormat))), _react2.default.createElement('dl', { className: 'fl fn-l w-50 dib-l w-auto-l lh-title mr5-l', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    }\n  }, _react2.default.createElement('dd', { className: 'f6 fw4 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    }\n  }, 'Monthly'), _react2.default.createElement('dd', { className: 'f3 fw6 ml0', __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    }\n  }, (0, _accountingJs.formatMoney)(annualised / 12, moneyFormat)))));\n}\n\nexports.default = (0, _freeagent.connectComponent)(function (_ref) {\n  var accounts = _ref.accounts;\n\n  var sixMonthsAgo = new Date(Date.now() - 1000 * 60 * 60 * 24 * 30 * 6).toISOString().substr(0, 10);\n  var threeMonthsAgo = new Date(Date.now() - 1000 * 60 * 60 * 24 * 30 * 6).toISOString().substr(0, 10);\n  return accounts.map(function (_ref2, ind) {\n    var url = _ref2.url;\n    return {\n      key: ind,\n      endpoint: 'bank_transactions?bank_account=' + url + '&from_date=' + threeMonthsAgo,\n      paging: true\n    };\n  });\n})(Outflows);\n\n\nfunction annualiseOutflows(transactions, categories) {\n  var start = Date.now() - 1000 * 60 * 60 * 24 * 60;\n  console.log(transactions.filter(function (t) {\n    if (parseFloat(t.amount) > -1000) return false;\n    if (new Date(t.datedOn).getTime() > start) return false;\n    return true;\n  }));\n  return transactions.reduce(function (total, _ref3) {\n    var amount = _ref3.amount,\n        description = _ref3.description;\n\n    if (filters.some(function (f) {\n      return f.test(description);\n    })) return total;\n    var amountNum = parseFloat(amount);\n    if (amountNum < 0) total += amountNum;\n    var unexplainedAmount = parseFloat(unexplainedAmount);\n    if (amountNum < 0 && unexplainedAmount < 0) total -= unexplainedAmount;\n    return total;\n  }, 0) * 365 / 180;\n}\n\n ;(function register() { /* react-hot-loader/webpack */ if (process.env.NODE_ENV !== 'production') { if (typeof __REACT_HOT_LOADER__ === 'undefined') { return; } if (typeof module.exports === 'function') { __REACT_HOT_LOADER__.register(module.exports, 'module.exports', \"/home/richard/Node/freeagent-summary/components/outflows.js\"); return; } for (var key in module.exports) { if (!Object.prototype.hasOwnProperty.call(module.exports, key)) { continue; } var namedExport = void 0; try { namedExport = module.exports[key]; } catch (err) { continue; } __REACT_HOT_LOADER__.register(namedExport, key, \"/home/richard/Node/freeagent-summary/components/outflows.js\"); } } })();\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))\n\n/***/ }),\n\n/***/ 913:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(57);\nmodule.exports = __webpack_require__(382);\n\n\n/***/ })\n\n},[913]);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2FjY291bnRpbmctanMvZGlzdC9hY2NvdW50aW5nLnVtZC5qcz8zMzFlMDQwIiwid2VicGFjazovLy8uL3BhZ2VzPzMzMWUwNDAiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9hY2NvdW50cy5qcz8zMzFlMDQwIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvY29tcGFueS5qcz8zMzFlMDQwIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvZGFzaGJvYXJkLmpzP2Y4MDI2N2YiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9pbmNvbWUtdHJlbmQuanM/ZjgwMjY3ZiIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2ludm9pY2VzLmpzP2Y4MDI2N2YiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9vdXRmbG93cy5qcz9mODAyNjdmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RCxDQUFDLDJCQUEyQjs7QUFFNUIsa0NBQWtDLGtCQUFrQixZQUFZLEVBQUUsNkNBQTZDOztBQUUvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQjtBQUNqQyxZQUFZLE9BQU87QUFDbkIsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FB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V0FBVTtnQkFBZDtrQkFDRTtBQURGO3FCQUNFLHNCQUFJLFdBQVU7Z0JBQWQ7a0JBQUE7QUFBQTtLQUNBLGtEQUFJLFdBQVU7Z0JBQWQ7a0JBQTRCO0FBQTVCO29DQUF3QyxhQUFhLElBSzlEO0FBRUQ7O21EQUFnQyxnQkFBa0I7TUFBQSxnQkFDaEQ7O01BQU0sZUFBZSxJQUFJLEtBQUssS0FBSyxRQUFRLE9BQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxHQUFHLGNBQWMsT0FBTyxHQUM5RjtNQUFNLGlCQUFpQixJQUFJLEtBQUssS0FBSyxRQUFRLE9BQU8sS0FBSyxLQUFLLEtBQUssS0FBSyxHQUFHLGNBQWMsT0FBTyxHQUNoRztrQkFBZ0IsSUFBSSxpQkFBVSxLQUFWO1FBQUc7O1dBRXJCO29EQUE0QyxzQkFDNUM7Y0FBUTtBQUZSO0FBSUgsR0FMUTtBQUhNLEdBUVo7OztBQUVILFNBQVMsa0JBQW1CLGNBQWMsWUFDeEM7TUFBTSxRQUFRLEtBQUssUUFBUyxPQUFPLEtBQUssS0FBSyxLQUM3QztVQUFRLGlCQUFpQixPQUFPLFVBQUMsR0FDL0I7UUFBSSxXQUFXLEVBQUUsVUFBVSxDQUFDLE1BQU0sT0FDbEM7UUFBSSxJQUFJLEtBQUssRUFBRSxTQUFTLFlBQVksT0FBTyxPQUMzQztXQUNEO0FBQ0QsR0FMWTtzQkFLUSxPQUFPLFVBQUMsY0FBbUM7UUFBQTtRQUFBLG9CQUM3RDs7Z0JBQVksS0FBSyxVQUFDLEdBQUQ7YUFBTyxFQUFFLEtBQUs7QUFBM0IsUUFBMEMsT0FDOUM7UUFBTSxZQUFZLFdBQ2xCO1FBQUksWUFBWSxHQUFHLFNBQ25CO1FBQU0sb0JBQW9CLFdBQzFCO1FBQUksWUFBWSxLQUFLLG9CQUFvQixHQUFHLFNBQzVDO1dBQ0Q7QUFQTSxLQU9KLEtBQUssTUFDVCIsImZpbGUiOiJidW5kbGVzL3BhZ2VzL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0dHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuXHQoZmFjdG9yeSgoZ2xvYmFsLmFjY291bnRpbmcgPSBnbG9iYWwuYWNjb3VudGluZyB8fCB7fSkpKTtcbn0odGhpcywgZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xuXG5cdGZ1bmN0aW9uIF9fY29tbW9uanMoZm4sIG1vZHVsZSkgeyByZXR1cm4gbW9kdWxlID0geyBleHBvcnRzOiB7fSB9LCBmbihtb2R1bGUsIG1vZHVsZS5leHBvcnRzKSwgbW9kdWxlLmV4cG9ydHM7IH1cblxuXHQvKipcblx0ICogVGhlIGxpYnJhcnkncyBzZXR0aW5ncyBjb25maWd1cmF0aW9uIG9iamVjdC5cblx0ICpcblx0ICogQ29udGFpbnMgZGVmYXVsdCBwYXJhbWV0ZXJzIGZvciBjdXJyZW5jeSBhbmQgbnVtYmVyIGZvcm1hdHRpbmdcblx0ICovXG5cdHZhciBzZXR0aW5ncyA9IHtcblx0ICBzeW1ib2w6ICckJywgLy8gZGVmYXVsdCBjdXJyZW5jeSBzeW1ib2wgaXMgJyQnXG5cdCAgZm9ybWF0OiAnJXMldicsIC8vIGNvbnRyb2xzIG91dHB1dDogJXMgPSBzeW1ib2wsICV2ID0gdmFsdWUgKGNhbiBiZSBvYmplY3QsIHNlZSBkb2NzKVxuXHQgIGRlY2ltYWw6ICcuJywgLy8gZGVjaW1hbCBwb2ludCBzZXBhcmF0b3Jcblx0ICB0aG91c2FuZDogJywnLCAvLyB0aG91c2FuZHMgc2VwYXJhdG9yXG5cdCAgcHJlY2lzaW9uOiAyLCAvLyBkZWNpbWFsIHBsYWNlc1xuXHQgIGdyb3VwaW5nOiAzLCAvLyBkaWdpdCBncm91cGluZyAobm90IGltcGxlbWVudGVkIHlldClcblx0ICBzdHJpcFplcm9zOiBmYWxzZSwgLy8gc3RyaXAgaW5zaWduaWZpY2FudCB6ZXJvcyBmcm9tIGRlY2ltYWwgcGFydFxuXHQgIGZhbGxiYWNrOiAwIC8vIHZhbHVlIHJldHVybmVkIG9uIHVuZm9ybWF0KCkgZmFpbHVyZVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBUYWtlcyBhIHN0cmluZy9hcnJheSBvZiBzdHJpbmdzLCByZW1vdmVzIGFsbCBmb3JtYXR0aW5nL2NydWZ0IGFuZCByZXR1cm5zIHRoZSByYXcgZmxvYXQgdmFsdWVcblx0ICogQWxpYXM6IGBhY2NvdW50aW5nLnBhcnNlKHN0cmluZylgXG5cdCAqXG5cdCAqIERlY2ltYWwgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIGZsb2F0cyAoZGVmYXVsdHMgdG9cblx0ICogYWNjb3VudGluZy5zZXR0aW5ncy5kZWNpbWFsKSwgc28gaWYgdGhlIG51bWJlciB1c2VzIGEgbm9uLXN0YW5kYXJkIGRlY2ltYWxcblx0ICogc2VwYXJhdG9yLCBwcm92aWRlIGl0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuXG5cdCAqXG5cdCAqIEFsc28gbWF0Y2hlcyBicmFja2V0ZWQgbmVnYXRpdmVzIChlZy4gJyQgKDEuOTkpJyA9PiAtMS45OSlcblx0ICpcblx0ICogRG9lc24ndCB0aHJvdyBhbnkgZXJyb3JzIChgTmFOYHMgYmVjb21lIDApIGJ1dCB0aGlzIG1heSBjaGFuZ2UgaW4gZnV0dXJlXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqICBhY2NvdW50aW5nLnVuZm9ybWF0KFwiwqMgMTIsMzQ1LDY3OC45MCBHQlBcIik7IC8vIDEyMzQ1Njc4Ljlcblx0ICogYGBgXG5cdCAqXG5cdCAqIEBtZXRob2QgdW5mb3JtYXRcblx0ICogQGZvciBhY2NvdW50aW5nXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz59IHZhbHVlIFRoZSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyBjb250YWluaW5nIHRoZSBudW1iZXIvcyB0byBwYXJzZS5cblx0ICogQHBhcmFtIHtOdW1iZXJ9ICAgICAgICAgICAgICAgZGVjaW1hbCBOdW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMgb2YgdGhlIHJlc3VsdGFudCBudW1iZXJcblx0ICogQHJldHVybiB7RmxvYXR9IFRoZSBwYXJzZWQgbnVtYmVyXG5cdCAqL1xuXHRmdW5jdGlvbiB1bmZvcm1hdCh2YWx1ZSkge1xuXHQgIHZhciBkZWNpbWFsID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8gc2V0dGluZ3MuZGVjaW1hbCA6IGFyZ3VtZW50c1sxXTtcblx0ICB2YXIgZmFsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyBzZXR0aW5ncy5mYWxsYmFjayA6IGFyZ3VtZW50c1syXTtcblxuXHQgIC8vIFJlY3Vyc2l2ZWx5IHVuZm9ybWF0IGFycmF5czpcblx0ICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZS5tYXAoZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICByZXR1cm4gdW5mb3JtYXQodmFsLCBkZWNpbWFsLCBmYWxsYmFjayk7XG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICAvLyBSZXR1cm4gdGhlIHZhbHVlIGFzLWlzIGlmIGl0J3MgYWxyZWFkeSBhIG51bWJlcjpcblx0ICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbHVlO1xuXG5cdCAgLy8gQnVpbGQgcmVnZXggdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgZXhjZXB0IGRpZ2l0cywgZGVjaW1hbCBwb2ludCBhbmQgbWludXMgc2lnbjpcblx0ICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdbXjAtOS0oLSktJyArIGRlY2ltYWwgKyAnXScsIFsnZyddKTtcblx0ICB2YXIgdW5mb3JtYXR0ZWRWYWx1ZVN0cmluZyA9ICgnJyArIHZhbHVlKS5yZXBsYWNlKHJlZ2V4LCAnJykgLy8gc3RyaXAgb3V0IGFueSBjcnVmdFxuXHQgIC5yZXBsYWNlKGRlY2ltYWwsICcuJykgLy8gbWFrZSBzdXJlIGRlY2ltYWwgcG9pbnQgaXMgc3RhbmRhcmRcblx0ICAucmVwbGFjZSgvXFwoKFstXSpcXGQqW14pXT9cXGQrKVxcKS9nLCAnLSQxJykgLy8gcmVwbGFjZSBicmFja2V0ZWQgdmFsdWVzIHdpdGggbmVnYXRpdmVzXG5cdCAgLnJlcGxhY2UoL1xcKCguKilcXCkvLCAnJyk7IC8vIHJlbW92ZSBhbnkgYnJhY2tldHMgdGhhdCBkbyBub3QgaGF2ZSBudW1lcmljIHZhbHVlXG5cblx0ICAvKipcblx0ICAgKiBIYW5kbGluZyAtdmUgbnVtYmVyIGFuZCBicmFja2V0LCBlZy5cblx0ICAgKiAoLTEwMCkgPSAxMDAsIC0oMTAwKSA9IDEwMCwgLS0xMDAgPSAxMDBcblx0ICAgKi9cblx0ICB2YXIgbmVnYXRpdmUgPSAodW5mb3JtYXR0ZWRWYWx1ZVN0cmluZy5tYXRjaCgvLS9nKSB8fCAyKS5sZW5ndGggJSAyLFxuXHQgICAgICBhYnNVbmZvcm1hdHRlZCA9IHBhcnNlRmxvYXQodW5mb3JtYXR0ZWRWYWx1ZVN0cmluZy5yZXBsYWNlKC8tL2csICcnKSksXG5cdCAgICAgIHVuZm9ybWF0dGVkID0gYWJzVW5mb3JtYXR0ZWQgKiAobmVnYXRpdmUgPyAtMSA6IDEpO1xuXG5cdCAgLy8gVGhpcyB3aWxsIGZhaWwgc2lsZW50bHkgd2hpY2ggbWF5IGNhdXNlIHRyb3VibGUsIGxldCdzIHdhaXQgYW5kIHNlZTpcblx0ICByZXR1cm4gIWlzTmFOKHVuZm9ybWF0dGVkKSA/IHVuZm9ybWF0dGVkIDogZmFsbGJhY2s7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgYW5kIG5vcm1hbGlzZSB0aGUgdmFsdWUgb2YgcHJlY2lzaW9uIChtdXN0IGJlIHBvc2l0aXZlIGludGVnZXIpXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2hlY2tQcmVjaXNpb24odmFsLCBiYXNlKSB7XG5cdCAgdmFsID0gTWF0aC5yb3VuZChNYXRoLmFicyh2YWwpKTtcblx0ICByZXR1cm4gaXNOYU4odmFsKSA/IGJhc2UgOiB2YWw7XG5cdH1cblxuXHQvKipcblx0ICogSW1wbGVtZW50YXRpb24gb2YgdG9GaXhlZCgpIHRoYXQgdHJlYXRzIGZsb2F0cyBtb3JlIGxpa2UgZGVjaW1hbHNcblx0ICpcblx0ICogRml4ZXMgYmluYXJ5IHJvdW5kaW5nIGlzc3VlcyAoZWcuICgwLjYxNSkudG9GaXhlZCgyKSA9PT0gJzAuNjEnKSB0aGF0IHByZXNlbnRcblx0ICogcHJvYmxlbXMgZm9yIGFjY291bnRpbmctIGFuZCBmaW5hbmNlLXJlbGF0ZWQgc29mdHdhcmUuXG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqICAoMC42MTUpLnRvRml4ZWQoMik7ICAgICAgICAgICAvLyBcIjAuNjFcIiAobmF0aXZlIHRvRml4ZWQgaGFzIHJvdW5kaW5nIGlzc3Vlcylcblx0ICogIGFjY291bnRpbmcudG9GaXhlZCgwLjYxNSwgMik7IC8vIFwiMC42MlwiXG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAbWV0aG9kIHRvRml4ZWRcblx0ICogQGZvciBhY2NvdW50aW5nXG5cdCAqIEBwYXJhbSB7RmxvYXR9ICAgdmFsdWUgICAgICAgICBUaGUgZmxvYXQgdG8gYmUgdHJlYXRlZCBhcyBhIGRlY2ltYWwgbnVtYmVyLlxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3ByZWNpc2lvbj0yXSBUaGUgbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzIHRvIGtlZXAuXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGdpdmVuIG51bWJlciB0cmFuc2Zvcm1lZCBpbnRvIGEgc3RyaW5nIHdpdGggdGhlIGdpdmVuIHByZWNpc3Npb25cblx0ICovXG5cdGZ1bmN0aW9uIHRvRml4ZWQodmFsdWUsIHByZWNpc2lvbikge1xuXHQgIHByZWNpc2lvbiA9IF9jaGVja1ByZWNpc2lvbihwcmVjaXNpb24sIHNldHRpbmdzLnByZWNpc2lvbik7XG5cdCAgdmFyIHBvd2VyID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7XG5cblx0ICAvLyBNdWx0aXBseSB1cCBieSBwcmVjaXNpb24sIHJvdW5kIGFjY3VyYXRlbHksIHRoZW4gZGl2aWRlIGFuZCB1c2UgbmF0aXZlIHRvRml4ZWQoKTpcblx0ICByZXR1cm4gKE1hdGgucm91bmQoKHZhbHVlICsgMWUtOCkgKiBwb3dlcikgLyBwb3dlcikudG9GaXhlZChwcmVjaXNpb24pO1xuXHR9XG5cblx0dmFyIGluZGV4ID0gX19jb21tb25qcyhmdW5jdGlvbiAobW9kdWxlKSB7XG5cdC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0dmFyIHByb3BJc0VudW1lcmFibGUgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG5cdGZ1bmN0aW9uIHRvT2JqZWN0KHZhbCkge1xuXHRcdGlmICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIE9iamVjdCh2YWwpO1xuXHR9XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuXHRcdHZhciBmcm9tO1xuXHRcdHZhciB0byA9IHRvT2JqZWN0KHRhcmdldCk7XG5cdFx0dmFyIHN5bWJvbHM7XG5cblx0XHRmb3IgKHZhciBzID0gMTsgcyA8IGFyZ3VtZW50cy5sZW5ndGg7IHMrKykge1xuXHRcdFx0ZnJvbSA9IE9iamVjdChhcmd1bWVudHNbc10pO1xuXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuXHRcdFx0XHRpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG5cdFx0XHRcdFx0dG9ba2V5XSA9IGZyb21ba2V5XTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuXHRcdFx0XHRzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhmcm9tKTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKHByb3BJc0VudW1lcmFibGUuY2FsbChmcm9tLCBzeW1ib2xzW2ldKSkge1xuXHRcdFx0XHRcdFx0dG9bc3ltYm9sc1tpXV0gPSBmcm9tW3N5bWJvbHNbaV1dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0bztcblx0fTtcblx0fSk7XG5cblx0dmFyIG9iamVjdEFzc2lnbiA9IChpbmRleCAmJiB0eXBlb2YgaW5kZXggPT09ICdvYmplY3QnICYmICdkZWZhdWx0JyBpbiBpbmRleCA/IGluZGV4WydkZWZhdWx0J10gOiBpbmRleCk7XG5cblx0ZnVuY3Rpb24gX3N0cmlwSW5zaWduaWZpY2FudFplcm9zKHN0ciwgZGVjaW1hbCkge1xuXHQgIHZhciBwYXJ0cyA9IHN0ci5zcGxpdChkZWNpbWFsKTtcblx0ICB2YXIgaW50ZWdlclBhcnQgPSBwYXJ0c1swXTtcblx0ICB2YXIgZGVjaW1hbFBhcnQgPSBwYXJ0c1sxXS5yZXBsYWNlKC8wKyQvLCAnJyk7XG5cblx0ICBpZiAoZGVjaW1hbFBhcnQubGVuZ3RoID4gMCkge1xuXHQgICAgcmV0dXJuIGludGVnZXJQYXJ0ICsgZGVjaW1hbCArIGRlY2ltYWxQYXJ0O1xuXHQgIH1cblxuXHQgIHJldHVybiBpbnRlZ2VyUGFydDtcblx0fVxuXG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBudW1iZXIsIHdpdGggY29tbWEtc2VwYXJhdGVkIHRob3VzYW5kcyBhbmQgY3VzdG9tIHByZWNpc2lvbi9kZWNpbWFsIHBsYWNlc1xuXHQgKiBBbGlhczogYGFjY291bnRpbmcuZm9ybWF0KClgXG5cdCAqXG5cdCAqIExvY2FsaXNlIGJ5IG92ZXJyaWRpbmcgdGhlIHByZWNpc2lvbiBhbmQgdGhvdXNhbmQgLyBkZWNpbWFsIHNlcGFyYXRvcnNcblx0ICpcblx0ICogYGBganNcblx0ICogYWNjb3VudGluZy5mb3JtYXROdW1iZXIoNTMxODAwOCk7ICAgICAgICAgICAgICAvLyA1LDMxOCwwMDhcblx0ICogYWNjb3VudGluZy5mb3JtYXROdW1iZXIoOTg3NjU0My4yMSwgeyBwcmVjaXNpb246IDMsIHRob3VzYW5kOiBcIiBcIiB9KTsgLy8gOSA4NzYgNTQzLjIxMFxuXHQgKiBgYGBcblx0ICpcblx0ICogQG1ldGhvZCBmb3JtYXROdW1iZXJcblx0ICogQGZvciBhY2NvdW50aW5nXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSAgICAgICAgbnVtYmVyIFRoZSBudW1iZXIgdG8gYmUgZm9ybWF0dGVkLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gICAgICAgIFtvcHRzPXt9XSBPYmplY3QgY29udGFpbmluZyBhbGwgdGhlIG9wdGlvbnMgb2YgdGhlIG1ldGhvZC5cblx0ICogQHJldHVybiB7U3RyaW5nfSBUaGUgZ2l2ZW4gbnVtYmVyIHByb3Blcmx5IGZvcm1hdHRlZC5cblx0ICAqL1xuXHRmdW5jdGlvbiBmb3JtYXROdW1iZXIobnVtYmVyKSB7XG5cdCAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuXHQgIC8vIFJlc3Vyc2l2ZWx5IGZvcm1hdCBhcnJheXM6XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkobnVtYmVyKSkge1xuXHQgICAgcmV0dXJuIG51bWJlci5tYXAoZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICByZXR1cm4gZm9ybWF0TnVtYmVyKHZhbCwgb3B0cyk7XG5cdCAgICB9KTtcblx0ICB9XG5cblx0ICAvLyBCdWlsZCBvcHRpb25zIG9iamVjdCBmcm9tIHNlY29uZCBwYXJhbSAoaWYgb2JqZWN0KSBvciBhbGwgcGFyYW1zLCBleHRlbmRpbmcgZGVmYXVsdHM6XG5cdCAgb3B0cyA9IG9iamVjdEFzc2lnbih7fSwgc2V0dGluZ3MsIG9wdHMpO1xuXG5cdCAgLy8gRG8gc29tZSBjYWxjOlxuXHQgIHZhciBuZWdhdGl2ZSA9IG51bWJlciA8IDAgPyAnLScgOiAnJztcblx0ICB2YXIgYmFzZSA9IHBhcnNlSW50KHRvRml4ZWQoTWF0aC5hYnMobnVtYmVyKSwgb3B0cy5wcmVjaXNpb24pLCAxMCkgKyAnJztcblx0ICB2YXIgbW9kID0gYmFzZS5sZW5ndGggPiAzID8gYmFzZS5sZW5ndGggJSAzIDogMDtcblxuXHQgIC8vIEZvcm1hdCB0aGUgbnVtYmVyOlxuXHQgIHZhciBmb3JtYXR0ZWQgPSBuZWdhdGl2ZSArIChtb2QgPyBiYXNlLnN1YnN0cigwLCBtb2QpICsgb3B0cy50aG91c2FuZCA6ICcnKSArIGJhc2Uuc3Vic3RyKG1vZCkucmVwbGFjZSgvKFxcZHszfSkoPz1cXGQpL2csICckMScgKyBvcHRzLnRob3VzYW5kKSArIChvcHRzLnByZWNpc2lvbiA+IDAgPyBvcHRzLmRlY2ltYWwgKyB0b0ZpeGVkKE1hdGguYWJzKG51bWJlciksIG9wdHMucHJlY2lzaW9uKS5zcGxpdCgnLicpWzFdIDogJycpO1xuXG5cdCAgcmV0dXJuIG9wdHMuc3RyaXBaZXJvcyA/IF9zdHJpcEluc2lnbmlmaWNhbnRaZXJvcyhmb3JtYXR0ZWQsIG9wdHMuZGVjaW1hbCkgOiBmb3JtYXR0ZWQ7XG5cdH1cblxuXHR2YXIgaW5kZXgkMSA9IF9fY29tbW9uanMoZnVuY3Rpb24gKG1vZHVsZSkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0dmFyIHN0clZhbHVlID0gU3RyaW5nLnByb3RvdHlwZS52YWx1ZU9mO1xuXHR2YXIgdHJ5U3RyaW5nT2JqZWN0ID0gZnVuY3Rpb24gdHJ5U3RyaW5nT2JqZWN0KHZhbHVlKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHN0clZhbHVlLmNhbGwodmFsdWUpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fTtcblx0dmFyIHRvU3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0dmFyIHN0ckNsYXNzID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cdHZhciBoYXNUb1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFN5bWJvbC50b1N0cmluZ1RhZyA9PT0gJ3N5bWJvbCc7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuXHRcdGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7IHJldHVybiB0cnVlOyB9XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHsgcmV0dXJuIGZhbHNlOyB9XG5cdFx0cmV0dXJuIGhhc1RvU3RyaW5nVGFnID8gdHJ5U3RyaW5nT2JqZWN0KHZhbHVlKSA6IHRvU3RyLmNhbGwodmFsdWUpID09PSBzdHJDbGFzcztcblx0fTtcblx0fSk7XG5cblx0dmFyIGlzU3RyaW5nID0gKGluZGV4JDEgJiYgdHlwZW9mIGluZGV4JDEgPT09ICdvYmplY3QnICYmICdkZWZhdWx0JyBpbiBpbmRleCQxID8gaW5kZXgkMVsnZGVmYXVsdCddIDogaW5kZXgkMSk7XG5cblx0LyoqXG5cdCAqIFBhcnNlcyBhIGZvcm1hdCBzdHJpbmcgb3Igb2JqZWN0IGFuZCByZXR1cm5zIGZvcm1hdCBvYmogZm9yIHVzZSBpbiByZW5kZXJpbmdcblx0ICpcblx0ICogYGZvcm1hdGAgaXMgZWl0aGVyIGEgc3RyaW5nIHdpdGggdGhlIGRlZmF1bHQgKHBvc2l0aXZlKSBmb3JtYXQsIG9yIG9iamVjdFxuXHQgKiBjb250YWluaW5nIGBwb3NgIChyZXF1aXJlZCksIGBuZWdgIGFuZCBgemVyb2AgdmFsdWVzXG5cdCAqXG5cdCAqIEVpdGhlciBzdHJpbmcgb3IgZm9ybWF0LnBvcyBtdXN0IGNvbnRhaW4gXCIldlwiICh2YWx1ZSkgdG8gYmUgdmFsaWRcblx0ICpcblx0ICogQG1ldGhvZCBfY2hlY2tDdXJyZW5jeUZvcm1hdFxuXHQgKiBAZm9yIGFjY291bnRpbmdcblx0ICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICBbZm9ybWF0PVwiJXMldlwiXSBTdHJpbmcgd2l0aCB0aGUgZm9ybWF0IHRvIGFwcGx5LCB3aGVyZSAlcyBpcyB0aGUgY3VycmVuY3kgc3ltYm9sIGFuZCAldiBpcyB0aGUgdmFsdWUuXG5cdCAqIEByZXR1cm4ge09iamVjdH0gb2JqZWN0IHJlcHJlc250aW5nIGZvcm1hdCAod2l0aCBwb3MsIG5lZyBhbmQgemVybyBhdHRyaWJ1dGVzKVxuXHQgKi9cblx0ZnVuY3Rpb24gX2NoZWNrQ3VycmVuY3lGb3JtYXQoZm9ybWF0KSB7XG5cdCAgLy8gRm9ybWF0IHNob3VsZCBiZSBhIHN0cmluZywgaW4gd2hpY2ggY2FzZSBgdmFsdWVgICgnJXYnKSBtdXN0IGJlIHByZXNlbnQ6XG5cdCAgaWYgKGlzU3RyaW5nKGZvcm1hdCkgJiYgZm9ybWF0Lm1hdGNoKCcldicpKSB7XG5cdCAgICAvLyBDcmVhdGUgYW5kIHJldHVybiBwb3NpdGl2ZSwgbmVnYXRpdmUgYW5kIHplcm8gZm9ybWF0czpcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHBvczogZm9ybWF0LFxuXHQgICAgICBuZWc6IGZvcm1hdC5yZXBsYWNlKCctJywgJycpLnJlcGxhY2UoJyV2JywgJy0ldicpLFxuXHQgICAgICB6ZXJvOiBmb3JtYXRcblx0ICAgIH07XG5cdCAgfVxuXG5cdCAgLy8gT3RoZXJ3aXNlLCBhc3N1bWUgZm9ybWF0IHdhcyBmaW5lOlxuXHQgIHJldHVybiBmb3JtYXQ7XG5cdH1cblxuXHQvKipcblx0ICogRm9ybWF0IGEgbnVtYmVyIGludG8gY3VycmVuY3lcblx0ICpcblx0ICogVXNhZ2U6IGFjY291bnRpbmcuZm9ybWF0TW9uZXkobnVtYmVyLCBzeW1ib2wsIHByZWNpc2lvbiwgdGhvdXNhbmRzU2VwLCBkZWNpbWFsU2VwLCBmb3JtYXQpXG5cdCAqIGRlZmF1bHRzOiAoMCwgJyQnLCAyLCAnLCcsICcuJywgJyVzJXYnKVxuXHQgKlxuXHQgKiBMb2NhbGlzZSBieSBvdmVycmlkaW5nIHRoZSBzeW1ib2wsIHByZWNpc2lvbiwgdGhvdXNhbmQgLyBkZWNpbWFsIHNlcGFyYXRvcnMgYW5kIGZvcm1hdFxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiAvLyBEZWZhdWx0IHVzYWdlOlxuXHQgKiBhY2NvdW50aW5nLmZvcm1hdE1vbmV5KDEyMzQ1Njc4KTsgLy8gJDEyLDM0NSw2NzguMDBcblx0ICpcblx0ICogLy8gRXVyb3BlYW4gZm9ybWF0dGluZyAoY3VzdG9tIHN5bWJvbCBhbmQgc2VwYXJhdG9ycyksIGNhbiBhbHNvIHVzZSBvcHRpb25zIG9iamVjdCBhcyBzZWNvbmQgcGFyYW1ldGVyOlxuXHQgKiBhY2NvdW50aW5nLmZvcm1hdE1vbmV5KDQ5OTkuOTksIHsgc3ltYm9sOiBcIuKCrFwiLCBwcmVjaXNpb246IDIsIHRob3VzYW5kOiBcIi5cIiwgZGVjaW1hbDogXCIsXCIgfSk7IC8vIOKCrDQuOTk5LDk5XG5cdCAqXG5cdCAqIC8vIE5lZ2F0aXZlIHZhbHVlcyBjYW4gYmUgZm9ybWF0dGVkIG5pY2VseTpcblx0ICogYWNjb3VudGluZy5mb3JtYXRNb25leSgtNTAwMDAwLCB7IHN5bWJvbDogXCLCoyBcIiwgcHJlY2lzaW9uOiAwIH0pOyAvLyDCoyAtNTAwLDAwMFxuXHQgKlxuXHQgKiAvLyBTaW1wbGUgYGZvcm1hdGAgc3RyaW5nIGFsbG93cyBjb250cm9sIG9mIHN5bWJvbCBwb3NpdGlvbiAoJXYgPSB2YWx1ZSwgJXMgPSBzeW1ib2wpOlxuXHQgKiBhY2NvdW50aW5nLmZvcm1hdE1vbmV5KDUzMTgwMDgsIHsgc3ltYm9sOiBcIkdCUFwiLCAgZm9ybWF0OiBcIiV2ICVzXCIgfSk7IC8vIDUsMzE4LDAwOC4wMCBHQlBcblx0ICogYGBgXG5cdCAqXG5cdCAqIEBtZXRob2QgZm9ybWF0TW9uZXlcblx0ICogQGZvciBhY2NvdW50aW5nXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSAgICAgICAgbnVtYmVyIE51bWJlciB0byBiZSBmb3JtYXR0ZWQuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSAgICAgICAgW29wdHM9e31dIE9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgb3B0aW9ucyBvZiB0aGUgbWV0aG9kLlxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBnaXZlbiBudW1iZXIgcHJvcGVybHkgZm9ybWF0dGVkIGFzIG1vbmV5LlxuXHQgKi9cblx0ZnVuY3Rpb24gZm9ybWF0TW9uZXkobnVtYmVyKSB7XG5cdCAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcblxuXHQgIC8vIFJlc3Vyc2l2ZWx5IGZvcm1hdCBhcnJheXM6XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkobnVtYmVyKSkge1xuXHQgICAgcmV0dXJuIG51bWJlci5tYXAoZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICByZXR1cm4gZm9ybWF0TW9uZXkodmFsLCBvcHRzKTtcblx0ICAgIH0pO1xuXHQgIH1cblxuXHQgIC8vIEJ1aWxkIG9wdGlvbnMgb2JqZWN0IGZyb20gc2Vjb25kIHBhcmFtIChpZiBvYmplY3QpIG9yIGFsbCBwYXJhbXMsIGV4dGVuZGluZyBkZWZhdWx0czpcblx0ICBvcHRzID0gb2JqZWN0QXNzaWduKHt9LCBzZXR0aW5ncywgb3B0cyk7XG5cblx0ICAvLyBDaGVjayBmb3JtYXQgKHJldHVybnMgb2JqZWN0IHdpdGggcG9zLCBuZWcgYW5kIHplcm8pOlxuXHQgIHZhciBmb3JtYXRzID0gX2NoZWNrQ3VycmVuY3lGb3JtYXQob3B0cy5mb3JtYXQpO1xuXG5cdCAgLy8gQ2hvb3NlIHdoaWNoIGZvcm1hdCB0byB1c2UgZm9yIHRoaXMgdmFsdWU6XG5cdCAgdmFyIHVzZUZvcm1hdCA9IHVuZGVmaW5lZDtcblxuXHQgIGlmIChudW1iZXIgPiAwKSB7XG5cdCAgICB1c2VGb3JtYXQgPSBmb3JtYXRzLnBvcztcblx0ICB9IGVsc2UgaWYgKG51bWJlciA8IDApIHtcblx0ICAgIHVzZUZvcm1hdCA9IGZvcm1hdHMubmVnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1c2VGb3JtYXQgPSBmb3JtYXRzLnplcm87XG5cdCAgfVxuXG5cdCAgLy8gUmV0dXJuIHdpdGggY3VycmVuY3kgc3ltYm9sIGFkZGVkOlxuXHQgIHJldHVybiB1c2VGb3JtYXQucmVwbGFjZSgnJXMnLCBvcHRzLnN5bWJvbCkucmVwbGFjZSgnJXYnLCBmb3JtYXROdW1iZXIoTWF0aC5hYnMobnVtYmVyKSwgb3B0cykpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEZvcm1hdCBhIGxpc3Qgb2YgbnVtYmVycyBpbnRvIGFuIGFjY291bnRpbmcgY29sdW1uLCBwYWRkaW5nIHdpdGggd2hpdGVzcGFjZVxuXHQgKiB0byBsaW5lIHVwIGN1cnJlbmN5IHN5bWJvbHMsIHRob3VzYW5kIHNlcGFyYXRvcnMgYW5kIGRlY2ltYWxzIHBsYWNlc1xuXHQgKlxuXHQgKiBMaXN0IHNob3VsZCBiZSBhbiBhcnJheSBvZiBudW1iZXJzXG5cdCAqXG5cdCAqIFJldHVybnMgYXJyYXkgb2YgYWNjb3V0aW5nLWZvcm1hdHRlZCBudW1iZXIgc3RyaW5ncyBvZiBzYW1lIGxlbmd0aFxuXHQgKlxuXHQgKiBOQjogYHdoaXRlLXNwYWNlOnByZWAgQ1NTIHJ1bGUgaXMgcmVxdWlyZWQgb24gdGhlIGxpc3QgY29udGFpbmVyIHRvIHByZXZlbnRcblx0ICogYnJvd3NlcnMgZnJvbSBjb2xsYXBzaW5nIHRoZSB3aGl0ZXNwYWNlIGluIHRoZSBvdXRwdXQgc3RyaW5ncy5cblx0ICpcblx0ICogYGBganNcblx0ICogYWNjb3VudGluZy5mb3JtYXRDb2x1bW4oWzEyMy41LCAzNDU2LjQ5LCA3Nzc4ODguOTksIDEyMzQ1Njc4LCAtNTQzMl0sIHsgc3ltYm9sOiBcIiQgXCIgfSk7XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAbWV0aG9kIGZvcm1hdENvbHVtblxuXHQgKiBAZm9yIGFjY291bnRpbmdcblx0ICogQHBhcmFtIHtBcnJheTxOdW1iZXI+fSBsaXN0IEFuIGFycmF5IG9mIG51bWJlcnMgdG8gZm9ybWF0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSAgICAgICAgW29wdHM9e31dIE9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgb3B0aW9ucyBvZiB0aGUgbWV0aG9kLlxuXHQgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IFtzeW1ib2w9XCIkXCJdIFN0cmluZyB3aXRoIHRoZSBjdXJyZW5jeSBzeW1ib2wuIEZvciBjb252ZW5pZW5jeSBpZiBjYW4gYmUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIHRoZSBvcHRpb25zIG9mIHRoZSBtZXRob2QuXG5cdCAqIEBwYXJhbSB7SW50ZWdlcn0gICAgICAgW3ByZWNpc2lvbj0yXSBOdW1iZXIgb2YgZGVjaW1hbCBkaWdpdHNcblx0ICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICBbdGhvdXNhbmQ9JywnXSBTdHJpbmcgd2l0aCB0aGUgdGhvdXNhbmRzIHNlcGFyYXRvci5cblx0ICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICBbZGVjaW1hbD1cIi5cIl0gU3RyaW5nIHdpdGggdGhlIGRlY2ltYWwgc2VwYXJhdG9yLlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgIFtmb3JtYXQ9XCIlcyV2XCJdIFN0cmluZyB3aXRoIHRoZSBmb3JtYXQgdG8gYXBwbHksIHdoZXJlICVzIGlzIHRoZSBjdXJyZW5jeSBzeW1ib2wgYW5kICV2IGlzIHRoZSB2YWx1ZS5cblx0ICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn0gYXJyYXkgb2YgYWNjb3V0aW5nLWZvcm1hdHRlZCBudW1iZXIgc3RyaW5ncyBvZiBzYW1lIGxlbmd0aFxuXHQgKi9cblx0ZnVuY3Rpb24gZm9ybWF0Q29sdW1uKGxpc3QpIHtcblx0ICB2YXIgb3B0cyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuXG5cdCAgaWYgKCFsaXN0KSByZXR1cm4gW107XG5cblx0ICAvLyBCdWlsZCBvcHRpb25zIG9iamVjdCBmcm9tIHNlY29uZCBwYXJhbSAoaWYgb2JqZWN0KSBvciBhbGwgcGFyYW1zLCBleHRlbmRpbmcgZGVmYXVsdHM6XG5cdCAgb3B0cyA9IG9iamVjdEFzc2lnbih7fSwgc2V0dGluZ3MsIG9wdHMpO1xuXG5cdCAgLy8gQ2hlY2sgZm9ybWF0IChyZXR1cm5zIG9iamVjdCB3aXRoIHBvcywgbmVnIGFuZCB6ZXJvKSwgb25seSBuZWVkIHBvcyBmb3Igbm93OlxuXHQgIHZhciBmb3JtYXRzID0gX2NoZWNrQ3VycmVuY3lGb3JtYXQob3B0cy5mb3JtYXQpO1xuXG5cdCAgLy8gV2hldGhlciB0byBwYWQgYXQgc3RhcnQgb2Ygc3RyaW5nIG9yIGFmdGVyIGN1cnJlbmN5IHN5bWJvbDpcblx0ICB2YXIgcGFkQWZ0ZXJTeW1ib2wgPSBmb3JtYXRzLnBvcy5pbmRleE9mKCclcycpIDwgZm9ybWF0cy5wb3MuaW5kZXhPZignJXYnKTtcblxuXHQgIC8vIFN0b3JlIHZhbHVlIGZvciB0aGUgbGVuZ3RoIG9mIHRoZSBsb25nZXN0IHN0cmluZyBpbiB0aGUgY29sdW1uOlxuXHQgIHZhciBtYXhMZW5ndGggPSAwO1xuXG5cdCAgLy8gRm9ybWF0IHRoZSBsaXN0IGFjY29yZGluZyB0byBvcHRpb25zLCBzdG9yZSB0aGUgbGVuZ3RoIG9mIHRoZSBsb25nZXN0IHN0cmluZzpcblx0ICB2YXIgZm9ybWF0dGVkID0gbGlzdC5tYXAoZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuXHQgICAgICAvLyBSZWN1cnNpdmVseSBmb3JtYXQgY29sdW1ucyBpZiBsaXN0IGlzIGEgbXVsdGktZGltZW5zaW9uYWwgYXJyYXk6XG5cdCAgICAgIHJldHVybiBmb3JtYXRDb2x1bW4odmFsLCBvcHRzKTtcblx0ICAgIH1cblx0ICAgIC8vIENsZWFuIHVwIHRoZSB2YWx1ZVxuXHQgICAgdmFsID0gdW5mb3JtYXQodmFsLCBvcHRzLmRlY2ltYWwpO1xuXG5cdCAgICAvLyBDaG9vc2Ugd2hpY2ggZm9ybWF0IHRvIHVzZSBmb3IgdGhpcyB2YWx1ZSAocG9zLCBuZWcgb3IgemVybyk6XG5cdCAgICB2YXIgdXNlRm9ybWF0ID0gdW5kZWZpbmVkO1xuXG5cdCAgICBpZiAodmFsID4gMCkge1xuXHQgICAgICB1c2VGb3JtYXQgPSBmb3JtYXRzLnBvcztcblx0ICAgIH0gZWxzZSBpZiAodmFsIDwgMCkge1xuXHQgICAgICB1c2VGb3JtYXQgPSBmb3JtYXRzLm5lZztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHVzZUZvcm1hdCA9IGZvcm1hdHMuemVybztcblx0ICAgIH1cblxuXHQgICAgLy8gRm9ybWF0IHRoaXMgdmFsdWUsIHB1c2ggaW50byBmb3JtYXR0ZWQgbGlzdCBhbmQgc2F2ZSB0aGUgbGVuZ3RoOlxuXHQgICAgdmFyIGZWYWwgPSB1c2VGb3JtYXQucmVwbGFjZSgnJXMnLCBvcHRzLnN5bWJvbCkucmVwbGFjZSgnJXYnLCBmb3JtYXROdW1iZXIoTWF0aC5hYnModmFsKSwgb3B0cykpO1xuXG5cdCAgICBpZiAoZlZhbC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcblx0ICAgICAgbWF4TGVuZ3RoID0gZlZhbC5sZW5ndGg7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBmVmFsO1xuXHQgIH0pO1xuXG5cdCAgLy8gUGFkIGVhY2ggbnVtYmVyIGluIHRoZSBsaXN0IGFuZCBzZW5kIGJhY2sgdGhlIGNvbHVtbiBvZiBudW1iZXJzOlxuXHQgIHJldHVybiBmb3JtYXR0ZWQubWFwKGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgIC8vIE9ubHkgaWYgdGhpcyBpcyBhIHN0cmluZyAobm90IGEgbmVzdGVkIGFycmF5LCB3aGljaCB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBwYWRkZWQpOlxuXHQgICAgaWYgKGlzU3RyaW5nKHZhbCkgJiYgdmFsLmxlbmd0aCA8IG1heExlbmd0aCkge1xuXHQgICAgICAvLyBEZXBlbmRpbmcgb24gc3ltYm9sIHBvc2l0aW9uLCBwYWQgYWZ0ZXIgc3ltYm9sIG9yIGF0IGluZGV4IDA6XG5cdCAgICAgIHJldHVybiBwYWRBZnRlclN5bWJvbCA/IHZhbC5yZXBsYWNlKG9wdHMuc3ltYm9sLCBvcHRzLnN5bWJvbCArIG5ldyBBcnJheShtYXhMZW5ndGggLSB2YWwubGVuZ3RoICsgMSkuam9pbignICcpKSA6IG5ldyBBcnJheShtYXhMZW5ndGggLSB2YWwubGVuZ3RoICsgMSkuam9pbignICcpICsgdmFsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbDtcblx0ICB9KTtcblx0fVxuXG5cdGV4cG9ydHMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0ZXhwb3J0cy51bmZvcm1hdCA9IHVuZm9ybWF0O1xuXHRleHBvcnRzLnRvRml4ZWQgPSB0b0ZpeGVkO1xuXHRleHBvcnRzLmZvcm1hdE1vbmV5ID0gZm9ybWF0TW9uZXk7XG5cdGV4cG9ydHMuZm9ybWF0TnVtYmVyID0gZm9ybWF0TnVtYmVyO1xuXHRleHBvcnRzLmZvcm1hdENvbHVtbiA9IGZvcm1hdENvbHVtbjtcblx0ZXhwb3J0cy5mb3JtYXQgPSBmb3JtYXRNb25leTtcblx0ZXhwb3J0cy5wYXJzZSA9IHVuZm9ybWF0O1xuXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2NvdW50aW5nLnVtZC5qcy5tYXBcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYWNjb3VudGluZy1qcy9kaXN0L2FjY291bnRpbmcudW1kLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDhcbi8vIG1vZHVsZSBjaHVua3MgPSAzIiwiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHVybCBmcm9tICd1cmwnXG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnXG5pbXBvcnQgRGFzaGJvYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvZGFzaGJvYXJkJ1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9saWIvY29uZmlnJ1xuaW1wb3J0IEZyZWVBZ2VudCBmcm9tICcuLi9saWIvZnJlZWFnZW50J1xuaW1wb3J0IHsgbWFrZVN0YXRlIH0gZnJvbSAnLi4vbGliL3N0YXRlLXV0aWxzJ1xuXG5jbGFzcyBIb21lIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIGdldEluaXRpYWxQcm9wcyAoKSB7XG4gICAgcmV0dXJuIG1ha2VTdGF0ZSgpXG4gIH1cblxuICBzdGF0aWMgY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gICAgZnJlZWFnZW50OiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0XG4gIH1cblxuICBzdGF0ZSA9IHsgZnJlZWFnZW50OiBudWxsIH1cblxuICBnZXRDaGlsZENvbnRleHQgKCkge1xuICAgIHJldHVybiB7IGZyZWVhZ2VudDogdGhpcy5zdGF0ZS5mcmVlYWdlbnQgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQgKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBmcmVlYWdlbnQ6IEZyZWVBZ2VudCgpIH0pXG4gIH1cblxuICBjb25uZWN0VG9GcmVlYWdlbnQgPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB7IHByb3RvY29sLCBob3N0IH0gPSB3aW5kb3cubG9jYXRpb25cbiAgICBjb25zdCByZWRpcmVjdFVyaSA9IGAke3Byb3RvY29sfS8vJHtob3N0fS9vYXV0aGBcbiAgICBjb25zdCBvYXV0aFVybCA9IHVybC5mb3JtYXQoe1xuICAgICAgcHJvdG9jb2w6ICdodHRwczonLFxuICAgICAgaG9zdDogJ2FwaS5mcmVlYWdlbnQuY29tJyxcbiAgICAgIHBhdGhuYW1lOiAnL3YyL2FwcHJvdmVfYXBwJyxcbiAgICAgIHF1ZXJ5OiB7XG4gICAgICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmksXG4gICAgICAgIHJlc3BvbnNlX3R5cGU6ICdjb2RlJyxcbiAgICAgICAgY2xpZW50X2lkOiBjb25maWcuY2xpZW50SWQsXG4gICAgICAgIHN0YXRlOiB3aW5kb3cub2F1dGhTdGF0ZVxuICAgICAgfVxuICAgIH0pXG4gICAgd2luZG93LmxvY2F0aW9uID0gb2F1dGhVcmxcbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3QgeyBzdGF0ZSB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IHsgZnJlZWFnZW50IH0gPSB0aGlzLnN0YXRlXG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAge3N0YXRlID8gPEhlYWQ+PHNjcmlwdCBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IGB3aW5kb3cub2F1dGhTdGF0ZT0nJHtzdGF0ZX0nYCB9fSAvPjwvSGVhZD4gOiBudWxsfVxuICAgICAgICB7ZnJlZWFnZW50XG4gICAgICAgICAgPyA8RGFzaGJvYXJkIC8+XG4gICAgICAgICAgOiA8YSBocmVmPScjJyBvbkNsaWNrPXt0aGlzLmNvbm5lY3RUb0ZyZWVhZ2VudH0+Q29ubmVjdCB0byBGcmVlYWdlbnQ8L2E+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIb21lXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9wYWdlcz9lbnRyeSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmltcG9ydCB7IGZvcm1hdE1vbmV5IH0gZnJvbSAnYWNjb3VudGluZy1qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHsgYWNjb3VudHMgPSBbXSB9KSB7XG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J21hNCc+XG4gICAgICA8aDMgY2xhc3NOYW1lPSdmNSB0dHUgZnc2Jz5CYWxhbmNlczwvaDM+XG4gICAgICA8dGFibGUgY2xhc3NOYW1lPSdjb2xsYXBzZSc+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICB7YWNjb3VudHMubWFwKHJlbmRlckFjY291bnQpfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5mdW5jdGlvbiByZW5kZXJBY2NvdW50ICh7IGJhbmtfbmFtZSwgbmFtZSwgY3VycmVudF9iYWxhbmNlIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8dHIgY2xhc3NOYW1lPSdmdzInIGtleT17bmFtZX0+XG4gICAgICA8dGQgY2xhc3NOYW1lPSdwdjIgcHIzJz57bmFtZX08L3RkPlxuICAgICAgPHRkIGNsYXNzTmFtZT0ncHYyIHBoMyBpJz57YmFua19uYW1lfTwvdGQ+XG4gICAgICA8dGQgY2xhc3NOYW1lPSdwdjIgcGwzIHRyIGZ3NiBmMyc+e2Zvcm1hdE1vbmV5KHBhcnNlRmxvYXQoY3VycmVudF9iYWxhbmNlKSwgeyBzeW1ib2w6ICfCoycsIHByZWNpc2lvbjogMiB9KX08L3RkPlxuICAgIDwvdHI+XG4gIClcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2NvbXBvbmVudHMvYWNjb3VudHMuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7IGNvbXBhbnkgPSB7fSB9KSB7XG4gIGNvbnN0IHsgbmFtZSwgdG93biwgY291bnRyeSB9ID0gY29tcGFueVxuICByZXR1cm4gKFxuICAgIDxoZWFkZXIgY2xhc3NOYW1lPSd0YyBwdjQgcHY1LW5zJz5cbiAgICAgIDxpbWcgc3JjPSdodHRwczovL3RhYmxlZmxpcC5pby9pbWcvdGFibGVmbGlwLm1pbi5zdmcnIGNsYXNzTmFtZT0nYnIzIGgzIHczJyBhbHQ9J2F2YXRhcicgLz5cbiAgICAgIDxoMSBjbGFzc05hbWU9J2Y1IGY0LW5zIGZ3Nic+e25hbWV9PC9oMT5cbiAgICAgIDxoMiBjbGFzc05hbWU9J2Y2IGZ3MiB0dHUgdHJhY2tlZCc+e3Rvd259LCB7Y291bnRyeX08L2gyPlxuICAgIDwvaGVhZGVyPlxuICApXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL2NvbXBhbnkuanMiLCJpbXBvcnQgeyBjb25uZWN0Q29tcG9uZW50IH0gZnJvbSAnLi4vbGliL2ZyZWVhZ2VudCdcbmltcG9ydCBDb21wYW55IGZyb20gJy4vY29tcGFueSdcbmltcG9ydCBBY2NvdW50cyBmcm9tICcuL2FjY291bnRzJ1xuaW1wb3J0IEludm9pY2VzIGZyb20gJy4vaW52b2ljZXMnXG5pbXBvcnQgSW5jb21lVHJlbmQgZnJvbSAnLi9pbmNvbWUtdHJlbmQnXG5pbXBvcnQgT3V0Zmxvd3MgZnJvbSAnLi9vdXRmbG93cydcblxuY29uc3QgRGFzaGJvYXJkID0gKHsgY29tcGFueSwgYmFua0FjY291bnRzLCBvdmVyZHVlSW52b2ljZXMsIGluY29tZSwgZXhwZW5zZXMsIGNhdGVnb3JpZXMgfSkgPT4ge1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGZsZXgtY29sdW1uIG13OSBjZW50ZXInPlxuICAgICAge2NvbXBhbnkgPyA8Q29tcGFueSBjb21wYW55PXtjb21wYW55LmNvbXBhbnl9IC8+IDogbnVsbH1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdmbGV4IGZsZXgtcm93IGZsZXgtd3JhcCBqdXN0aWZ5LWFyb3VuZCc+XG4gICAgICAgIHtiYW5rQWNjb3VudHMgPyA8QWNjb3VudHMgYWNjb3VudHM9e2JhbmtBY2NvdW50cy5iYW5rX2FjY291bnRzfSAvPiA6IG51bGx9XG4gICAgICAgIHtvdmVyZHVlSW52b2ljZXMgPyA8SW52b2ljZXMgaW52b2ljZXM9e292ZXJkdWVJbnZvaWNlcy5pbnZvaWNlc30gLz4gOiBudWxsfVxuICAgICAgICB7aW5jb21lID8gPEluY29tZVRyZW5kIGludm9pY2VzPXtpbmNvbWUuaW52b2ljZXN9IC8+IDogbnVsbH1cbiAgICAgICAge2JhbmtBY2NvdW50cyAmJiBjYXRlZ29yaWVzID8gPE91dGZsb3dzIGFjY291bnRzPXtiYW5rQWNjb3VudHMuYmFua19hY2NvdW50c30gY2F0ZWdvcmllcz17Y2F0ZWdvcmllc30gLz4gOiBudWxsfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdENvbXBvbmVudCgoKSA9PiB7XG4gIHJldHVybiBbXG4gICAgeyBrZXk6ICdjb21wYW55JywgZW5kcG9pbnQ6ICdjb21wYW55JyB9LFxuICAgIHsga2V5OiAnYmFua0FjY291bnRzJywgZW5kcG9pbnQ6ICdiYW5rX2FjY291bnRzJyB9LFxuICAgIHsga2V5OiAnb3ZlcmR1ZUludm9pY2VzJywgZW5kcG9pbnQ6ICdpbnZvaWNlcz92aWV3PW9wZW5fb3Jfb3ZlcmR1ZScsIHBhZ2luZzogdHJ1ZSB9LFxuICAgIHsga2V5OiAnaW5jb21lJywgZW5kcG9pbnQ6ICdpbnZvaWNlcz92aWV3PWxhc3RfNl9tb250aHMnLCBwYWdpbmc6IHRydWUgfSxcbiAgICB7IGtleTogJ2NhdGVnb3JpZXMnLCBlbmRwb2ludDogJ2NhdGVnb3JpZXMnIH1cbiAgXVxufSkoRGFzaGJvYXJkKVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9kYXNoYm9hcmQuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBmb3JtYXRNb25leSB9IGZyb20gJ2FjY291bnRpbmctanMnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7IGludm9pY2VzID0gW10gfSkge1xuICBjb25zdCB0cmVuZHMgPSBjYWxjdWxhdGVUcmVuZHMoaW52b2ljZXMpXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT0nbWE0Jz5cbiAgICAgIDxoMyBjbGFzc05hbWU9J2Y1IHR0dSBmdzYnPkluY29tZSBUcmVuZDwvaDM+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY2Ygbm93cmFwJz5cbiAgICAgICAge3RyZW5kcy5tYXAoKHsgbW9udGhzQWdvLCByYXRlIH0pID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRsIGtleT17bW9udGhzQWdvfSBjbGFzc05hbWU9J2ZsIGZuLWwgdy01MCBkaWItbCB3LWF1dG8tbCBsaC10aXRsZSBtcjUtbCc+XG4gICAgICAgICAgICAgIDxkZCBjbGFzc05hbWU9J2Y2IGZ3NCBtbDAnPkxhc3Qge21vbnRoc0Fnb30gbW9udGhzPC9kZD5cbiAgICAgICAgICAgICAgPGRkIGNsYXNzTmFtZT0nZjMgZnc2IG1sMCc+e2Zvcm1hdE1vbmV5KHJhdGUsIHsgc3ltYm9sOiAnwqMnLCBwcmVjaXNpb246IDIgfSl9PC9kZD5cbiAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgKVxuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmNvbnN0IG9uZU1vbnRoID0gMTAwMCAqIDYwICogNjAgKiAyNCAqIDMwXG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZVRyZW5kcyAoaW52b2ljZXMpIHtcbiAgcmV0dXJuIFsxLCAyLCAzLCA2XS5tYXAoKG1vbnRoc0FnbykgPT4ge1xuICAgIGNvbnN0IHRpbWVBZ28gPSBvbmVNb250aCAqIG1vbnRoc0Fnb1xuICAgIGNvbnN0IG1pblRpbWUgPSBEYXRlLm5vdygpIC0gdGltZUFnb1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1vbnRoc0FnbyxcbiAgICAgIHJhdGU6IGludm9pY2VzLnJlZHVjZSgodG90YWwsIHsgZGF0ZWRfb24sIG5ldF92YWx1ZSB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGVkT24gPSBuZXcgRGF0ZShkYXRlZF9vbikuZ2V0VGltZSgpXG4gICAgICAgIGlmIChkYXRlZE9uID4gbWluVGltZSkgdG90YWwgKz0gcGFyc2VGbG9hdChuZXRfdmFsdWUpXG4gICAgICAgIHJldHVybiB0b3RhbFxuICAgICAgfSwgMCkgKiAzNjUgLyAoMzAgKiBtb250aHNBZ28pXG4gICAgfVxuICB9KVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9pbmNvbWUtdHJlbmQuanMiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBmb3JtYXRNb25leSB9IGZyb20gJ2FjY291bnRpbmctanMnXG5cbmNvbnN0IG1vbmV5Rm9ybWF0ID0geyBzeW1ib2w6ICfCoycsIHByZWNpc2lvbjogMiB9XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7IGludm9pY2VzID0gW10gfSkge1xuICBjb25zdCB7IGR1ZSwgb3ZlcmR1ZSwgZDkwIH0gPSBzdW1tYXJpc2VJbnZvaWNlcyhpbnZvaWNlcylcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPSdtYTQnPlxuICAgICAgPGgzIGNsYXNzTmFtZT0nZjUgdHR1IGZ3Nic+SW52b2ljZXM8L2gzPlxuICAgICAgPGRpdiBjbGFzc05hbWU9J2NmIG5vd3JhcCc+XG4gICAgICAgIDxkbCBjbGFzc05hbWU9J2ZsIGZuLWwgdy01MCBkaWItbCB3LWF1dG8tbCBsaC10aXRsZSBtcjUtbCc+XG4gICAgICAgICAgPGRkIGNsYXNzTmFtZT0nZjYgZnc0IG1sMCc+RHVlPC9kZD5cbiAgICAgICAgICA8ZGQgY2xhc3NOYW1lPSdmMyBmdzYgbWwwJz57Zm9ybWF0TW9uZXkoZHVlLCBtb25leUZvcm1hdCl9PC9kZD5cbiAgICAgICAgPC9kbD5cbiAgICAgICAgPGRsIGNsYXNzTmFtZT0nZmwgZm4tbCB3LTUwIGRpYi1sIHctYXV0by1sIGxoLXRpdGxlIG1yNS1sJz5cbiAgICAgICAgICA8ZGQgY2xhc3NOYW1lPSdmNiBmdzQgbWwwJz5vZiB3aGljaCBPdmVyZHVlPC9kZD5cbiAgICAgICAgICA8ZGQgY2xhc3NOYW1lPSdmMyBmdzYgbWwwJz57Zm9ybWF0TW9uZXkob3ZlcmR1ZSwgbW9uZXlGb3JtYXQpfTwvZGQ+XG4gICAgICAgIDwvZGw+XG4gICAgICAgIDxkbCBjbGFzc05hbWU9J2ZsIGZuLWwgdy01MCBkaWItbCB3LWF1dG8tbCBsaC10aXRsZSBtcjUtbCc+XG4gICAgICAgICAgPGRkIGNsYXNzTmFtZT0nZjYgZnc0IG1sMCc+b2Ygd2hpY2ggPiA5MGQ8L2RkPlxuICAgICAgICAgIDxkZCBjbGFzc05hbWU9J2YzIGZ3NiBtbDAnPntmb3JtYXRNb25leShkOTAsIG1vbmV5Rm9ybWF0KX08L2RkPlxuICAgICAgICA8L2RsPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuY29uc3QgZDkwQWdvID0gMTAwMCAqIDYwICogNjAgKiAyNCAqIDkwXG5cbmZ1bmN0aW9uIHN1bW1hcmlzZUludm9pY2VzIChpbnZvaWNlcykge1xuICBjb25zdCBkOTBDdXRPZmYgPSBEYXRlLm5vdygpIC0gZDkwQWdvXG5cbiAgcmV0dXJuIGludm9pY2VzLnJlZHVjZSgoc3VtbWFyeSwgeyBkdWVfdmFsdWUsIGR1ZV9vbiwgc3RhdHVzIH0pID0+IHtcbiAgICBjb25zdCBkdWVWYWx1ZSA9IHBhcnNlRmxvYXQoZHVlX3ZhbHVlKVxuICAgIGNvbnN0IGR1ZU9uID0gbmV3IERhdGUoZHVlX29uKS5nZXRUaW1lKClcblxuICAgIHN1bW1hcnkuZHVlICs9IGR1ZVZhbHVlXG4gICAgaWYgKHN0YXR1cyA9PT0gJ092ZXJkdWUnKSBzdW1tYXJ5Lm92ZXJkdWUgKz0gZHVlVmFsdWVcbiAgICBpZiAoZHVlT24gPCBkOTBDdXRPZmYpIHN1bW1hcnkuZDkwICs9IGR1ZVZhbHVlXG5cbiAgICByZXR1cm4gc3VtbWFyeVxuICB9LCB7IGR1ZTogMCwgb3ZlcmR1ZTogMCwgZDkwOiAwIH0pXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9jb21wb25lbnRzL2ludm9pY2VzLmpzIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgY29ubmVjdENvbXBvbmVudCB9IGZyb20gJy4uL2xpYi9mcmVlYWdlbnQnXG5pbXBvcnQgeyBmb3JtYXRNb25leSB9IGZyb20gJ2FjY291bnRpbmctanMnXG5cbmNvbnN0IG1vbmV5Rm9ybWF0ID0geyBzeW1ib2w6ICfCoycsIHByZWNpc2lvbjogMiB9XG5jb25zdCBmaWx0ZXJzID0gW1xuICAvSE1SQyBWQVQvXG5dXG5cbmZ1bmN0aW9uIE91dGZsb3dzIChkYXRhKSB7XG4gIGNvbnN0IHBzZXVkb0FycmF5ID0geyAuLi5kYXRhLCBsZW5ndGg6IGRhdGEuYWNjb3VudHMubGVuZ3RoIH1cbiAgY29uc3QgX2NhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXNcbiAgY29uc3QgY2F0ZWdvcmllcyA9IE9iamVjdC5rZXlzKF9jYXRlZ29yaWVzKS5yZWR1Y2UoKGNhdGVnb3JpZXMsIHNlY3Rpb24pID0+IGNhdGVnb3JpZXMuY29uY2F0KF9jYXRlZ29yaWVzW3NlY3Rpb25dKSwgW10pXG4gIGNvbnN0IHRyYW5zYWN0aW9ucyA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2UuY2FsbChwc2V1ZG9BcnJheSwgKGFsbFRyYW5zLCBhY2NvdW50KSA9PiBhbGxUcmFucy5jb25jYXQoYWNjb3VudC5iYW5rX3RyYW5zYWN0aW9ucyksIFtdKVxuICBpZiAoIXRyYW5zYWN0aW9ucy5sZW5ndGgpIHJldHVybiBudWxsXG4gIGNvbnN0IGFubnVhbGlzZWQgPSBhbm51YWxpc2VPdXRmbG93cyh0cmFuc2FjdGlvbnMsIGNhdGVnb3JpZXMpXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9J21hNCc+XG4gICAgICA8aDMgY2xhc3NOYW1lPSdmNSB0dHUgZnc2Jz5PdXRmbG93czwvaDM+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nY2Ygbm93cmFwJz5cbiAgICAgICAgPGRsIGNsYXNzTmFtZT0nZmwgZm4tbCB3LTUwIGRpYi1sIHctYXV0by1sIGxoLXRpdGxlIG1yNS1sJz5cbiAgICAgICAgICA8ZGQgY2xhc3NOYW1lPSdmNiBmdzQgbWwwJz5Bbm51YWxpc2VkPC9kZD5cbiAgICAgICAgICA8ZGQgY2xhc3NOYW1lPSdmMyBmdzYgbWwwJz57Zm9ybWF0TW9uZXkoYW5udWFsaXNlZCwgbW9uZXlGb3JtYXQpfTwvZGQ+XG4gICAgICAgIDwvZGw+XG4gICAgICAgIDxkbCBjbGFzc05hbWU9J2ZsIGZuLWwgdy01MCBkaWItbCB3LWF1dG8tbCBsaC10aXRsZSBtcjUtbCc+XG4gICAgICAgICAgPGRkIGNsYXNzTmFtZT0nZjYgZnc0IG1sMCc+TW9udGhseTwvZGQ+XG4gICAgICAgICAgPGRkIGNsYXNzTmFtZT0nZjMgZnc2IG1sMCc+e2Zvcm1hdE1vbmV5KGFubnVhbGlzZWQgLyAxMiwgbW9uZXlGb3JtYXQpfTwvZGQ+XG4gICAgICAgIDwvZGw+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0Q29tcG9uZW50KCh7IGFjY291bnRzIH0pID0+IHtcbiAgY29uc3Qgc2l4TW9udGhzQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDEwMDAgKiA2MCAqIDYwICogMjQgKiAzMCAqIDYpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKVxuICBjb25zdCB0aHJlZU1vbnRoc0FnbyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMDAwICogNjAgKiA2MCAqIDI0ICogMzAgKiA2KS50b0lTT1N0cmluZygpLnN1YnN0cigwLCAxMClcbiAgcmV0dXJuIGFjY291bnRzLm1hcCgoeyB1cmwgfSwgaW5kKSA9PiAoe1xuICAgIGtleTogaW5kLFxuICAgIGVuZHBvaW50OiBgYmFua190cmFuc2FjdGlvbnM/YmFua19hY2NvdW50PSR7dXJsfSZmcm9tX2RhdGU9JHt0aHJlZU1vbnRoc0Fnb31gLFxuICAgIHBhZ2luZzogdHJ1ZVxuICB9KSlcbn0pKE91dGZsb3dzKVxuXG5mdW5jdGlvbiBhbm51YWxpc2VPdXRmbG93cyAodHJhbnNhY3Rpb25zLCBjYXRlZ29yaWVzKSB7XG4gIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKSAtICgxMDAwICogNjAgKiA2MCAqIDI0ICogNjApXG4gIGNvbnNvbGUubG9nKHRyYW5zYWN0aW9ucy5maWx0ZXIoKHQpID0+IHtcbiAgICBpZiAocGFyc2VGbG9hdCh0LmFtb3VudCkgPiAtMTAwMCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKG5ldyBEYXRlKHQuZGF0ZWRPbikuZ2V0VGltZSgpID4gc3RhcnQpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH0pKVxuICByZXR1cm4gdHJhbnNhY3Rpb25zLnJlZHVjZSgodG90YWwsIHsgYW1vdW50LCBkZXNjcmlwdGlvbiB9KSA9PiB7XG4gICAgaWYgKGZpbHRlcnMuc29tZSgoZikgPT4gZi50ZXN0KGRlc2NyaXB0aW9uKSkpIHJldHVybiB0b3RhbFxuICAgIGNvbnN0IGFtb3VudE51bSA9IHBhcnNlRmxvYXQoYW1vdW50KVxuICAgIGlmIChhbW91bnROdW0gPCAwKSB0b3RhbCArPSBhbW91bnROdW1cbiAgICBjb25zdCB1bmV4cGxhaW5lZEFtb3VudCA9IHBhcnNlRmxvYXQodW5leHBsYWluZWRBbW91bnQpXG4gICAgaWYgKGFtb3VudE51bSA8IDAgJiYgdW5leHBsYWluZWRBbW91bnQgPCAwKSB0b3RhbCAtPSB1bmV4cGxhaW5lZEFtb3VudFxuICAgIHJldHVybiB0b3RhbFxuICB9LCAwKSAqIDM2NSAvIDE4MFxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vY29tcG9uZW50cy9vdXRmbG93cy5qcyJdLCJzb3VyY2VSb290IjoiIn0="}